---
- hosts: apache
  gather_facts: False
  sudo: yes
  tasks:
    - name: install python v2
      raw: test -e /usr/bin/python || (apt-get -y update && apt-get install -y python-minimal)
    - name: create directory for apache
      file:
        path: /home/ubuntu/www
        state: directory
        owner: www-data
        group: www-data
        mode: 0775
        recurse: yes
    - name: get files from github
      git:
        repo: https://github.com/lotofgenius/dockertest.git
        version: master
        dest: /home/ubuntu/www
    - name: run apache with docker    
      shell: |
       docker run -dit --name apache -p 8080:80 -v /home/ubuntu/www/:/usr/local/apache2/htdocs/ httpd:2.4
